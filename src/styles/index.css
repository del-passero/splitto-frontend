/* src/styles/index.css */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* анимации — как было */
@keyframes fab-in { 0%{opacity:0;transform:scale(0)}60%{opacity:1;transform:scale(1.15)}100%{opacity:1;transform:scale(1)} }
.animate-fab-in { animation: fab-in 0.25s cubic-bezier(.77,0,.18,1) forwards; }
@keyframes fab-label-in { 0%{opacity:0;transform:translateX(-16px)}100%{opacity:1;transform:translateX(0)} }
.fab-label-appear { animation: fab-label-in 0.25s cubic-bezier(.77,0,.18,1) both; }
@keyframes modal-pop { 0%{transform:scale(0.92) translateY(40px);opacity:0}100%{transform:scale(1) translateY(0);opacity:1} }
.animate-modal-pop { animation: modal-pop 0.18s cubic-bezier(.26,1.12,.48,1.03); }

/* ===================== */
/*      Theme vars       */
/* ===================== */
:root {
  color-scheme: light dark;

  /* Базовые значения до инициализации (или вне Telegram) */
  --tg-bg-color: #f8faff;
  --tg-card-bg: #ffffff;
  --tg-text-color: #222222;
  --tg-hint-color: #888888;
  --tg-link-color: #5393e7;
  --tg-accent-color: var(--tg-link-color);
  --tg-secondary-bg-color: #e7e7e7;
  --tg-button-color: #5294e2;
  --tg-button-text-color: #ffffff;

  --tg-fab-label-bg: rgba(255,255,255,0.96);
  --tg-fab-label-color: #222222;
}

/* НАШИ пресеты — включаются только атрибутом data-theme на <html> */
html[data-theme="light"] {
  color-scheme: light;
  --tg-bg-color: #f8faff;
  --tg-card-bg: #ffffff;
  --tg-text-color: #222222;
  --tg-hint-color: #888888;
  --tg-link-color: #5393e7;
  --tg-accent-color: var(--tg-link-color);
  --tg-secondary-bg-color: #e7e7e7;

  --tg-fab-label-bg: rgba(255,255,255,0.96);
  --tg-fab-label-color: #222222;
}
html[data-theme="dark"] {
  color-scheme: dark;
  --tg-bg-color: #18191b;
  --tg-card-bg: #232b3b;
  --tg-text-color: #f2f2f7;
  --tg-hint-color: #9aa4b2;
  --tg-link-color: #6aa8ff;
  --tg-accent-color: var(--tg-link-color);
  --tg-secondary-bg-color: #2e3748;

  --tg-fab-label-bg: rgba(0,0,0,0.82);
  --tg-fab-label-color: #ffffff;
}

/* База */
html, body, #root {
  background: var(--tg-bg-color);
  color: var(--tg-text-color);
  min-height: 100%;
}
body {
  /* без внешних шрифтов (CSP) */
  font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
  min-height: 100vh;
}
.shadow-tg-card { box-shadow: 0 4px 24px 0 rgba(0,0,0,0.11); }

button, input, select, textarea, a { color: inherit; }
a { text-decoration: none; }

/* =============================== */
/* Mobile viewport & overscroll fix*/
/* =============================== */
html, body, #root {
  height: 100dvh;
  min-height: 100dvh;
  overflow: hidden;
  overscroll-behavior: none;
  -webkit-text-size-adjust: 100%;
  -webkit-overflow-scrolling: touch;
}
@supports (height: 100svh) {
  html, body, #root {
    height: 100svh;
    min-height: 100svh;
  }
}
* { -webkit-tap-highlight-color: transparent; }

body.modal-open {
  position: fixed;
  inset: 0;
  width: 100%;
  overflow: hidden !important;
}

/* Контейнер-вьюпорт приложения + внутренний скролл */
.app-viewport { height: 100%; width: 100%; overflow: hidden; background: var(--tg-bg-color); }
.app-scroll    { height: 100%; width: 100%; overflow-y: auto; overscroll-behavior: contain; -webkit-overflow-scrolling: touch; }
